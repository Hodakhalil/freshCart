"use strict";(self.webpackChunkfreshcart=self.webpackChunkfreshcart||[]).push([[243],{2243:(_,u,o)=>{o.r(u),o.d(u,{ProductsComponent:()=>H});var a=o(6814),h=o(1120),t=o(4769);let n=(()=>{class r{transform(e,s){return e.filter(c=>c.title.toLowerCase().includes(s.toLowerCase()))}static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275pipe=t.Yjl({name:"search",type:r,pure:!0,standalone:!0})}return r})();var m=o(95),i=o(1132),l=o(6968),g=o(6286),v=o(2425);function f(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"i",19),t.NdJ("click",function(){t.CHM(e);const c=t.oxw().$implicit,d=t.oxw(2);return t.KtG(d.addFav(c._id))}),t.qZA()}}function C(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"i",20),t.NdJ("click",function(){t.CHM(e);const c=t.oxw().$implicit,d=t.oxw(2);return t.KtG(d.removeFav(c._id))}),t.qZA()}}const x=function(r){return["/productdetails",r]};function T(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7),t.YNc(2,f,1,0,"i",8),t.YNc(3,C,1,0,"i",9),t.TgZ(4,"div",10)(5,"div",11),t._UZ(6,"img",12),t.TgZ(7,"h3",13),t._uU(8),t.qZA(),t.TgZ(9,"h4",13),t._uU(10),t.qZA(),t.TgZ(11,"div",14)(12,"span",15),t._uU(13),t.ALo(14,"currency"),t.qZA(),t.TgZ(15,"div"),t._UZ(16,"i",16),t.TgZ(17,"span",17),t._uU(18),t.qZA()()()()(),t.TgZ(19,"button",18),t.NdJ("click",function(){const d=t.CHM(e).$implicit,Z=t.oxw(2);return t.KtG(Z.addCart(d.id))}),t._uU(20," Add To Cart "),t.qZA()()()}if(2&r){const e=p.$implicit,s=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!s.whishListData.includes(e._id)),t.xp6(1),t.Q6J("ngIf",s.whishListData.includes(e._id)),t.xp6(1),t.Q6J("routerLink",t.VKq(12,x,e._id)),t.xp6(2),t.Q6J("src",e.imageCover,t.LSH)("alt",e.title),t.xp6(2),t.Oqu(e.category.name),t.xp6(2),t.hij(" ",e.title.split(" ").slice(0,2).join(" ")," "),t.xp6(3),t.Oqu(t.xi3(14,9,e.price," EGP ")),t.xp6(5),t.Oqu(e.ratingsAverage)}}function P(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"section",1)(1,"h1",2),t._uU(2,"Popular Products"),t.qZA(),t.TgZ(3,"input",3),t.NdJ("ngModelChange",function(c){t.CHM(e);const d=t.oxw();return t.KtG(d.term=c)}),t.qZA(),t.TgZ(4,"div",4),t.YNc(5,T,21,14,"div",5),t.ALo(6,"search"),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.term),t.xp6(2),t.Q6J("ngForOf",t.xi3(6,2,e.products,e.term))}}let H=(()=>{class r{constructor(e,s,c,d){this._ProductsService=e,this._WhishlistService=s,this._CartService=c,this._ToastrService=d,this.products=[],this.whishListData=[],this.term=""}ngOnInit(){this._ProductsService.getProducts().subscribe({next:e=>{console.log(e.data),this.products=e.data}}),this._WhishlistService.getWhishList().subscribe({next:e=>{console.log(e.data);const s=e.data.map(c=>c._id);this.whishListData=s}})}addCart(e){this._CartService.addToCart(e).subscribe({next:s=>{console.log(s),this._ToastrService.success(s.message)},error:s=>{console.log(s)}})}addFav(e){this._WhishlistService.addtoWhishList(e).subscribe({next:s=>{console.log(s),this._ToastrService.success(s.message),this.whishListData=s.data}})}removeFav(e){this._WhishlistService.removeWhishList(e).subscribe({next:s=>{console.log(s),this._ToastrService.success(s.message),this.whishListData=s.data}})}static#t=this.\u0275fac=function(s){return new(s||r)(t.Y36(i.s),t.Y36(l.m),t.Y36(g.N),t.Y36(v._W))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-products"]],standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[["class","my-4",4,"ngIf"],[1,"my-4"],[1,"h2","fw-bold","py-3","text-center","text-main"],["type","search","placeholder","Search...",1,"w-50","my-3","mx-auto","form-control",3,"ngModel","ngModelChange"],[1,"row","g-4"],["class","col-md-2",4,"ngFor","ngForOf"],[1,"col-md-2"],[1,"product"],["class","fa-regular fa-heart heart",3,"click",4,"ngIf"],["class","fa-solid fa-heart heart","role","button",3,"click",4,"ngIf"],[3,"routerLink"],["role","button",1,"p-2"],[1,"w-100",3,"src","alt"],[1,"h6"],[1,"d-flex","align-items-center","justify-content-between"],[1,"text-main"],[1,"fas","fa-star","rating-color"],[1,"text-muted"],[1,"btn-main","w-100",3,"click"],[1,"fa-regular","fa-heart","heart",3,"click"],["role","button",1,"fa-solid","fa-heart","heart",3,"click"]],template:function(s,c){1&s&&t.YNc(0,P,7,5,"section",0),2&s&&t.Q6J("ngIf",c.products.length>0)},dependencies:[a.ez,a.sg,a.O5,a.H9,h.rH,n,m.u5,m.Fj,m.JJ,m.On]})}return r})()},6286:(_,u,o)=>{o.d(u,{N:()=>t});var a=o(4769),h=o(9862);let t=(()=>{class n{constructor(i){this._HttpClient=i,this.myHeaders={token:localStorage.getItem("eToken")}}addToCart(i){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/cart",{productId:i},{headers:this.myHeaders})}getUserCart(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.myHeaders})}removeCartItem(i){return this._HttpClient.delete(`https://ecommerce.routemisr.com/api/v1/cart/${i}`,{headers:this.myHeaders})}UpdateCart(i,l){return this._HttpClient.put(`https://ecommerce.routemisr.com/api/v1/cart/${i}`,{count:l},{headers:this.myHeaders})}checkOut(i,l){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${i}?url=http://localhost:4200`,{shippingAddress:l},{headers:this.myHeaders})}clearCart(){return this._HttpClient.delete("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.myHeaders})}getallOrders(i){return this._HttpClient.get(`https://ecommerce.routemisr.com/api/v1/orders/user/${i}`)}static#t=this.\u0275fac=function(l){return new(l||n)(a.LFG(h.eN))};static#e=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()},1132:(_,u,o)=>{o.d(u,{s:()=>t});var a=o(4769),h=o(9862);let t=(()=>{class n{constructor(i){this._HttpClient=i,this.baseUrl="https://ecommerce.routemisr.com"}getProducts(){return this._HttpClient.get(this.baseUrl+"/api/v1/products")}grtCategories(){return this._HttpClient.get(this.baseUrl+"/api/v1/categories")}getProductDetails(i){return this._HttpClient.get(this.baseUrl+`/api/v1/products/${i}`)}getAllBrands(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/brands")}static#t=this.\u0275fac=function(l){return new(l||n)(a.LFG(h.eN))};static#e=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()}}]);