"use strict";(self.webpackChunkfreshcart=self.webpackChunkfreshcart||[]).push([[674],{3674:(u,l,c)=>{c.r(l),c.d(l,{WhishlistComponent:()=>T});var a=c(6814),m=c(1120),t=c(4769),n=c(6968),p=c(2425),r=c(6286);function _(i,d){if(1&i){const e=t.EpF();t.TgZ(0,"i",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,h=t.oxw(2);return t.KtG(h.addFav(o._id))}),t.qZA()}}function g(i,d){if(1&i){const e=t.EpF();t.TgZ(0,"i",19),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,h=t.oxw(2);return t.KtG(h.removeFav(o._id))}),t.qZA()}}const v=function(i){return["/productdetails",i]};function f(i,d){if(1&i){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6),t.YNc(2,_,1,0,"i",7),t.YNc(3,g,1,0,"i",8),t.TgZ(4,"div",9)(5,"div",10),t._UZ(6,"img",11),t.TgZ(7,"h3",12),t._uU(8),t.qZA(),t.TgZ(9,"h4",12),t._uU(10),t.qZA(),t.TgZ(11,"div",13)(12,"span",14),t._uU(13),t.ALo(14,"currency"),t.qZA(),t.TgZ(15,"div"),t._UZ(16,"i",15),t.TgZ(17,"span",16),t._uU(18),t.qZA()()()()(),t.TgZ(19,"button",17),t.NdJ("click",function(){const h=t.CHM(e).$implicit,x=t.oxw(2);return t.KtG(x.addCart(h.id))}),t._uU(20," Add To Cart "),t.qZA()()()}if(2&i){const e=d.$implicit,s=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!s.whishListData.includes(e._id)),t.xp6(1),t.Q6J("ngIf",s.whishListData.includes(e._id)),t.xp6(1),t.Q6J("routerLink",t.VKq(12,v,e._id)),t.xp6(2),t.Q6J("src",e.imageCover,t.LSH)("alt",e.title),t.xp6(2),t.Oqu(e.category.name),t.xp6(2),t.hij(" ",e.title.split(" ").slice(0,2).join(" ")," "),t.xp6(3),t.Oqu(t.xi3(14,9,e.price," EGP ")),t.xp6(5),t.Oqu(e.ratingsAverage)}}function C(i,d){if(1&i&&(t.TgZ(0,"section",1)(1,"h1",2),t._uU(2,"Popular Products"),t.qZA(),t.TgZ(3,"div",3),t.YNc(4,f,21,14,"div",4),t.ALo(5,"slice"),t.qZA()()),2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",t.Dn7(5,1,e.products,0,18))}}let T=(()=>{class i{constructor(e,s,o){this._WhishlistService=e,this._ToastrService=s,this._CartService=o,this.products=[],this.whishListData=[]}ngOnInit(){this._WhishlistService.getWhishList().subscribe({next:e=>{console.log(e),this.products=e.data;const s=e.data.map(o=>o._id);this.whishListData=s}})}addFav(e){this._WhishlistService.addtoWhishList(e).subscribe({next:s=>{console.log(s),this._ToastrService.success(s.message),this.whishListData=s.data}})}removeFav(e){this._WhishlistService.removeWhishList(e).subscribe({next:s=>{console.log(s),this._ToastrService.success(s.message),this.whishListData=s.data,this._WhishlistService.getWhishList().subscribe({next:o=>{this.products=o.data}})}})}addCart(e){this._CartService.addToCart(e).subscribe({next:s=>{console.log(s),this._ToastrService.success(s.message)},error:s=>{console.log(s)}})}static#t=this.\u0275fac=function(s){return new(s||i)(t.Y36(n.m),t.Y36(p._W),t.Y36(r.N))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-whishlist"]],standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[["class","my-4",4,"ngIf"],[1,"my-4"],[1,"h2","fw-bold","py-2"],[1,"row","g-4"],["class","col-md-2",4,"ngFor","ngForOf"],[1,"col-md-2"],[1,"product"],["class","fa-regular fa-heart heart",3,"click",4,"ngIf"],["class","fa-solid fa-heart heart","role","button",3,"click",4,"ngIf"],[3,"routerLink"],["role","button",1,"p-2"],[1,"w-100",3,"src","alt"],[1,"h6"],[1,"d-flex","align-items-center","justify-content-between"],[1,"text-main"],[1,"fas","fa-star","rating-color"],[1,"text-muted"],[1,"btn-main","w-100",3,"click"],[1,"fa-regular","fa-heart","heart",3,"click"],["role","button",1,"fa-solid","fa-heart","heart",3,"click"]],template:function(s,o){1&s&&t.YNc(0,C,6,5,"section",0),2&s&&t.Q6J("ngIf",o.products.length>0)},dependencies:[a.ez,a.sg,a.O5,a.OU,a.H9,m.rH]})}return i})()},6286:(u,l,c)=>{c.d(l,{N:()=>t});var a=c(4769),m=c(9862);let t=(()=>{class n{constructor(r){this._HttpClient=r,this.myHeaders={token:localStorage.getItem("eToken")}}addToCart(r){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/cart",{productId:r},{headers:this.myHeaders})}getUserCart(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.myHeaders})}removeCartItem(r){return this._HttpClient.delete(`https://ecommerce.routemisr.com/api/v1/cart/${r}`,{headers:this.myHeaders})}UpdateCart(r,_){return this._HttpClient.put(`https://ecommerce.routemisr.com/api/v1/cart/${r}`,{count:_},{headers:this.myHeaders})}checkOut(r,_){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${r}?url=http://localhost:4200`,{shippingAddress:_},{headers:this.myHeaders})}clearCart(){return this._HttpClient.delete("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.myHeaders})}getallOrders(r){return this._HttpClient.get(`https://ecommerce.routemisr.com/api/v1/orders/user/${r}`)}static#t=this.\u0275fac=function(_){return new(_||n)(a.LFG(m.eN))};static#e=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()}}]);