"use strict";(self.webpackChunkfreshcart=self.webpackChunkfreshcart||[]).push([[969],{1969:(h,n,r)=>{r.r(n),r.d(n,{CheckoutComponent:()=>e});var u=r(6814),o=r(95),t=r(4769),a=r(1120),l=r(6286);let e=(()=>{class s{constructor(c,i,m){this._FormBuilder=c,this._ActivatedRoute=i,this._CartService=m,this.cartId="",this.checkout=this._FormBuilder.group({details:[""],phone:[""],city:[""]})}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:c=>{console.log(c.get("id")),this.cartId=c.get("id")}})}handleForm(){console.log(this.checkout.value),this._CartService.checkOut(this.cartId,this.checkout.value).subscribe({next:c=>{console.log(c),"success"==c.status&&window.open(c.session.url,"_self")}})}static#t=this.\u0275fac=function(i){return new(i||s)(t.Y36(o.qu),t.Y36(a.gz),t.Y36(l.N))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-checkout"]],standalone:!0,features:[t.jDz],decls:16,vars:1,consts:[[1,"bg-main-light","rounded-3","my-3","p-4","w-50","mx-auto"],[3,"formGroup","ngSubmit"],["for","details"],["id","details","formControlName","details",1,"form-control"],["for","phone"],["type","tel","id","phone","formControlName","phone",1,"form-control"],["for","city"],["type","text","id","city","formControlName","city",1,"form-control"],[1,"btn-main","mt-3"]],template:function(i,m){1&i&&(t.TgZ(0,"section",0)(1,"form",1),t.NdJ("ngSubmit",function(){return m.handleForm()}),t.TgZ(2,"div")(3,"label",2),t._uU(4,"details"),t.qZA(),t._UZ(5,"textarea",3),t.qZA(),t.TgZ(6,"div")(7,"label",4),t._uU(8,"phone"),t.qZA(),t._UZ(9,"input",5),t.qZA(),t.TgZ(10,"div")(11,"label",6),t._uU(12,"city"),t.qZA(),t._UZ(13,"input",7),t.qZA(),t.TgZ(14,"button",8),t._uU(15,"checkout"),t.qZA()()()),2&i&&(t.xp6(1),t.Q6J("formGroup",m.checkout))},dependencies:[u.ez,o.UX,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u]})}return s})()},6286:(h,n,r)=>{r.d(n,{N:()=>t});var u=r(4769),o=r(9862);let t=(()=>{class a{constructor(e){this._HttpClient=e,this.myHeaders={token:localStorage.getItem("eToken")}}addToCart(e){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/cart",{productId:e},{headers:this.myHeaders})}getUserCart(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.myHeaders})}removeCartItem(e){return this._HttpClient.delete(`https://ecommerce.routemisr.com/api/v1/cart/${e}`,{headers:this.myHeaders})}UpdateCart(e,s){return this._HttpClient.put(`https://ecommerce.routemisr.com/api/v1/cart/${e}`,{count:s},{headers:this.myHeaders})}checkOut(e,s){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${e}?url=http://localhost:4200`,{shippingAddress:s},{headers:this.myHeaders})}clearCart(){return this._HttpClient.delete("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.myHeaders})}getallOrders(e){return this._HttpClient.get(`https://ecommerce.routemisr.com/api/v1/orders/user/${e}`)}static#t=this.\u0275fac=function(s){return new(s||a)(u.LFG(o.eN))};static#e=this.\u0275prov=u.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);